---
import Layout from "../../../layouts/Layout.astro";

import HeaderSurvey from "../../../components/survey/HeaderSurvey.astro";
import FooterSurvey from "../../../components/survey/FooterSurvey.astro";

import SliderComponent from "../../../components/p1/pollpredictor/SliderComponent.astro";

// CSS to be optimized
import '../../../assets/styles/p1/bootstrap-slider.css';
---

<Layout title="Poll Predictor">
  <div class="container-fluid container-full-height px-0">
    <HeaderSurvey />
    <!-- Main Content -->
    <div class="container content">
      <div class="row">
        <div class="col-12 col-sm-10 mx-auto">
          <div class="panel pt-0 text-center">
            <div class="row">
              <div class="col">
                <h1 class="h4 mt-2 fw-light">Do you think the Earth is flat?</h1>
                <p>Ipsos iSay members in the United States who answered YES</p>
                
                <div class="mt-3 mb-4">

                  <!-- Explanatory tooltip -->
                  <div id="helpText" class="floating-tooltip animation">
                    Drag the slider to predict
                  </div>
    
                  <!-- Percentage -->
                  <span style="display:none;" id="userPredictionSliderValLabel" class="slider-value"><span id="userPredictionSliderVal">50</span><span class="percentage">%</span></span>
    
                  <input id="userPredictionSlider" type="text" data-slider-min="0" data-slider-max="100" data-slider-step="1" data-slider-value="50" data-slider-tooltip="hide" />
    
                </div>

                <div class="col-12 text-center">
                  <div class="d-grid gap-2 mb-3 text-center">
                    <a class="btn btn-primary btn-block" href="/p1/pollpredictor/interstitial">Place prediction</a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <FooterSurvey />
  </div>
</Layout>

<style>
  html,
  body {
    height: 100%;
  }

  .container-full-height {
    min-height: 100vh;
    display: flex;
    flex-direction: column;
  }

  .content {
    flex: 1;
    display: flex;
    justify-content: center;
    align-items: center;
    width: 100% !important;
    max-width: 800px;
  }

  .slider.slider-horizontal {
    width: 100% !important;
  }

  /* Poll Predictor custom */
  .pollpredictor_slider .floating-tooltip {
    display: inline-block;
    margin: 26px 0 23px 0;
    padding: 7px 15px;
    width: auto;
    background-color: #2F469C;
    color: #FFFFFF;
    border-radius: 2px;
  }

  .pollpredictor_slider .floating-tooltip:after {
    content: '';
    position: absolute;
    top: 100%;
    left: 50%;
    margin-left: -15px;
    width: 0;
    height: 0;
    border-top: solid 10px #2F469C;
    border-left: solid 15px transparent;
    border-right: solid 15px transparent;
    border-radius: 2px;
  }

  .pollpredictor_slider .animation {
    animation-name: floating;
    animation-duration: 2s;
    animation-iteration-count: infinite;
    animation-timing-function: ease-in-out;
    -webkit-font-smoothing: subpixel-antialiased;
  }

  @keyframes floating {
    from {
      transform: translate(0, 0px);
    }
    65% {
      transform: translate(0, 25px);
    }
    to {
      transform: translate(0, -0px);
    }
  }

  .pollpredictor_slider .slider-value {
    font-size: 48px;
    color: #2F469C;
    display: block;
    margin: 20px 0 15px 0;
  }

  .pollpredictor_slider .slider-value span.percentage {
    font-size: 24px;
  }
</style>
<script>
if (window.jQuery) {
    console.log("jQuery is loaded.");
  } else {
    console.error("jQuery is NOT loaded.");
  }


  /*
  import '../assets/js/bootstrap-slider.min.js';

  document.addEventListener("DOMContentLoaded", function () {
    const slider = document.querySelector("#userPredictionSlider");
    if (slider) {
      $(slider).slider({
        tooltip: "hide",
      });

      $(slider).on("slideStop", function (slideEvt) {
        document.querySelector("#userPredictionSliderVal").textContent = slideEvt.value;
      });

      $(slider).on("slide", function (slideEvt) {
        document.querySelector("#userPredictionSliderVal").textContent = slideEvt.value;
        document.querySelector("#userPredictionSliderValLabel").style.display = "block";
        document.querySelector("#helpText").style.display = "none";
      });
    }
  });
  */
</script>
